(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(11)},11:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a(2),s=a(3),l=a(5),i=a(4),o=a(6),c=a(0),u=a.n(c),h=a(8),m=a.n(h),f=(a(16),a(9)),d=a.n(f);function v(e){var t;return e.value<0?u.a.createElement("div",{className:"tile"},null):(t="tile tile-"+e.value.toString(),u.a.createElement("div",{className:t},e.value))}var b=function(e){function t(){return Object(n.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(s.a)(t,[{key:"renderTile",value:function(e){return u.a.createElement(v,{value:this.props.tiles[e]})}},{key:"render",value:function(){return u.a.createElement("div",{className:"game-board"},u.a.createElement("div",{className:"board-row"},this.renderTile(0),this.renderTile(1),this.renderTile(2),this.renderTile(3)),u.a.createElement("div",{className:"board-row"},this.renderTile(4),this.renderTile(5),this.renderTile(6),this.renderTile(7)),u.a.createElement("div",{className:"board-row"},this.renderTile(8),this.renderTile(9),this.renderTile(10),this.renderTile(11)),u.a.createElement("div",{className:"board-row"},this.renderTile(12),this.renderTile(13),this.renderTile(14),this.renderTile(15)))}}]),t}(u.a.Component),p=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(l.a)(this,Object(i.a)(t).call(this,e))).handleKeyPress=function(e){38===(e=e||window.event).keyCode?a.shift(1):40===e.keyCode?a.shift(2):37===e.keyCode?a.shift(0):39===e.keyCode&&a.shift(3)},a.state={history:[{tiles:Array(16).fill(-1),score:0}],best_score:0,stepNumber:0};for(var r=[];r.length<2;){var s=Math.floor(4*Math.random()*4);r.indexOf(s)>-1||(r[r.length]=s)}return a.state.history[0].tiles[r[0]]=2,a.state.history[0].tiles[r[1]]=2,a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.hydrateStateWithLocalStorage(),window.addEventListener("beforeunload",this.saveStateToLocalStorage.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.saveStateToLocalStorage.bind(this)),this.saveStateToLocalStorage()}},{key:"hydrateStateWithLocalStorage",value:function(){for(var e in this.state)if(localStorage.hasOwnProperty(e)){var t=localStorage.getItem(e);try{t=JSON.parse(t),this.setState(Object(r.a)({},e,t))}catch(a){this.setState(Object(r.a)({},e,t))}}}},{key:"saveStateToLocalStorage",value:function(){for(var e in this.state)localStorage.setItem(e,JSON.stringify(this.state[e]))}},{key:"reset_game",value:function(){for(var e=[];e.length<2;){var t=Math.floor(4*Math.random()*4);e.indexOf(t)>-1||(e[e.length]=t)}var a=Array(16).fill(-1);a[e[0]]=2,a[e[1]]=2,console.log(a),this.setState({best_score:Math.max(this.state.best_score,this.state.history[this.state.stepNumber].score),history:[{tiles:a,score:0}],stepNumber:0})}},{key:"undo",value:function(){this.setState({stepNumber:Math.max(0,this.state.stepNumber-1)})}},{key:"shift",value:function(e){if(this.move_possible){var t=this.state.history.slice(0,this.state.stepNumber+1),a=t[t.length-1],r=a.tiles.slice(),n=!1,s=0;if(0===e)for(var l=0;l<4;l++){for(var i=4*l,o=i+1;o<4*(l+1);)r[o]>0&&r[o]===r[i]?(s+=r[o],r[i]=2*r[i],r[o]=-1,i=o,n=!0):r[o]>0&&(i=o),o++;for(var c=4*l;c<4*(l+1)&&r[c]>0;)c++;for(o=c;o<4*(l+1);)r[o]>0&&(r[c]=r[o],r[o]=-1,c++,n=!0),o++}else if(1===e)for(var u=0;u<4;u++){for(var h=u,m=h+4;m<r.length;)r[m]>0&&r[m]===r[h]?(s+=r[m],r[h]=2*r[h],r[m]=-1,h=m,n=!0):r[m]>0&&(h=m),m+=4;for(var f=u;f<r.length&&r[f]>0;)f+=4;for(m=f;m<r.length;)r[m]>0&&(r[f]=r[m],r[m]=-1,f+=4,n=!0),m+=4}else if(2===e)for(var d=0;d<4;d++){for(var v=r.length-d-1,b=v-4;b>=0;)r[b]>0&&r[b]===r[v]?(s+=r[b],r[v]=2*r[v],r[b]=-1,v=b,n=!0):r[b]>0&&(v=b),b-=4;for(var p=r.length-d-1;p>=0&&r[p]>0;)p-=4;for(b=p;b>=0;)r[b]>0&&(r[p]=r[b],r[b]=-1,p-=4,n=!0),b-=4}else if(3===e)for(var E=0;E<4;E++){for(var g=4*(E+1)-1,y=g-1;y>4*E-1;)r[y]>0&&r[y]===r[g]?(s+=r[y],r[g]=2*r[g],r[y]=-1,g=y,n=!0):r[y]>0&&(g=y),y--;for(var N=4*(E+1)-1;N>=4*E&&r[N]>0;)N--;for(y=N;y>=4*E;)r[y]>0&&(r[N]=r[y],r[y]=-1,N--,n=!0),y--}for(var w=[],S=0;S<r.length;S++)r[S]<0&&w.push(S);if(n){if(w)r[w[Math.floor(Math.random()*w.length)]]=2;this.setState({best_score:Math.max(this.state.history[this.state.stepNumber].score+s,this.state.best_score),history:t.concat([{tiles:r,score:a.score+s}]),stepNumber:t.length})}}}},{key:"move_possible",value:function(e,t,a){for(var r=!1,n=0;n<t;n++)for(var s=n*t,l=0;l<a;l++){var i=s+l,o=i-a>0?i-a:null,c=i+a<e.length?i+a:null;r=r||null!==o||null!==c||null!==(l-1>0?i-1:null)||null!==(l+1<a?i+1:null)}return r}},{key:"render",value:function(){var e=this,t=this.state.best_score,a=this.state.history[this.state.stepNumber],r=a.score;return document.onkeydown=this.handleKeyPress,u.a.createElement("div",{id:"game",className:"game",onKeyPress:this.handleKeyPress},u.a.createElement("div",{className:"header"},u.a.createElement("div",{className:"game-header"},u.a.createElement("p",{className:"title"},"2048"),u.a.createElement("div",{className:"game-info"},u.a.createElement("div",null,u.a.createElement("p",null,"Score"),u.a.createElement("p",null,u.a.createElement("strong",null,r))),u.a.createElement("div",null,u.a.createElement("p",null,"Best"),u.a.createElement("p",null,u.a.createElement("strong",null,t))),u.a.createElement("div",null,u.a.createElement("p",null,"Moves"),u.a.createElement("p",null,u.a.createElement("strong",null,this.state.stepNumber))))),u.a.createElement("div",{className:"aux-header"},u.a.createElement("p",{className:"subtitle"},"A take on 2048 in React."),u.a.createElement("button",{className:"resetGame",onClick:function(){return e.undo()}},"Undo"),u.a.createElement("button",{className:"resetGame",onClick:function(){return e.reset_game()}},"Reset"))),u.a.createElement(d.a,{className:"swipe",onSwipedLeft:function(){return e.shift(0)},onSwipedUp:function(){return e.shift(1)},onSwipedDown:function(){return e.shift(2)},onSwipedRight:function(){return e.shift(3)},preventDefaultTouchmoveEvent:!0},u.a.createElement(b,{tiles:a.tiles})),u.a.createElement("div",{className:"controls"},u.a.createElement("button",{className:"control",onClick:function(){return e.shift(0)}},u.a.createElement("i",{className:"fas fa-arrow-left"})),u.a.createElement("button",{className:"control",onClick:function(){return e.shift(1)}},u.a.createElement("i",{className:"fas fa-arrow-up"})),u.a.createElement("button",{className:"control",onClick:function(){return e.shift(2)}},u.a.createElement("i",{className:"fas fa-arrow-down"})),u.a.createElement("button",{className:"control",onClick:function(){return e.shift(3)}},u.a.createElement("i",{className:"fas fa-arrow-right"}))))}}]),t}(u.a.Component);m.a.render(u.a.createElement(p,null),document.getElementById("root"))},16:function(e,t,a){}},[[10,2,1]]]);
//# sourceMappingURL=main.dd873ca4.chunk.js.map